<!DOCTYPE html>
<html lang="es">
<head>
    <!-- ========== Meta Tags ========== -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="NicVG">
    <meta name="description" content="Freddys Pizza, La Mejor Pizza Artesanal de Leon, Guanajuato.">
    <!-- ======== Page title ============ -->
    <title>Mi Cuenta - Freddys Pizza</title>
    <!--<< Favicon >>-->
    <link rel="shortcut icon" href="assets/img/favicon.png">
    <!-- Google Sign in -->
    <script src="https://accounts.google.com/gsi/client" async></script>
    <!--<< Bootstrap min.css >>-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!--<< All Min Css >>-->
    <link rel="stylesheet" href="assets/css/all.min.css">
    <!--<< Animate.css >>-->
    <link rel="stylesheet" href="assets/css/animate.css">
    <!--<< Magnific Popup.css >>-->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!--<< MeanMenu.css >>-->
    <link rel="stylesheet" href="assets/css/meanmenu.css">
    <!--<< Swiper Bundle.css >>-->
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
    <!--<< Nice Select.css >>-->
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <!--<< Main.css >>-->
    <link rel="stylesheet" href="assets/css/main.css">
    <!--<< Custom Account CSS >>-->
    <link rel="stylesheet" href="assets/css/account.css">
</head>

<body class="dark-mood" style="background-color: #2b2b2b; color: #fff;">
    <!-- Preloader Start -->
    <div id="preloader" class="preloader">
        <div class="animation-preloader">
            <div class="spinner"></div>
            <div class="txt-loading">
                <span data-text-preloader="F" class="letters-loading">F</span>
                <span data-text-preloader="R" class="letters-loading">R</span>
                <span data-text-preloader="E" class="letters-loading">E</span>
                <span data-text-preloader="D" class="letters-loading">D</span>
                <span data-text-preloader="D" class="letters-loading">D</span>
                <span data-text-preloader="Y" class="letters-loading">Y</span>
                <span data-text-preloader="S" class="letters-loading">S</span>
            </div>
            <p class="text-center">Cargando</p>
        </div>
    </div>

    <!-- Back To Top Start -->
    <button id="back-top" class="back-to-top">
        <i class="fa-regular fa-arrow-up"></i>
    </button>

    <!-- Offcanvas Area Start -->
    <div class="fix-area">
        <div class="offcanvas__info">
            <div class="offcanvas__wrapper">
                <div class="offcanvas__content">
                    <div class="offcanvas__top mb-5 d-flex justify-content-between align-items-center">
                        <div class="offcanvas__logo">
                            <a href="index.html">
                                <img src="assets/img/logo/logo.svg" alt="logo-img">
                            </a>
                        </div>
                        <div class="offcanvas__close">
                            <button>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="offcanvas__custom-menu d-xl-none">
                        <a href="index.html" class="offcanvas__menu-btn">Inicio</a>
                        <a href="my-account.html" class="offcanvas__menu-btn">Mi Cuenta</a>
                    </div>
                    <div class="offcanvas__navigation">
                        <div class="mobile-menu fix mb-3"></div>
                    </div>
                    <p class="text d-none d-lg-block">
                        Somos Freddy's Pizza, una pizzería familiar con la mejor calidad artesanal, donde nuestra prioridad es ofrecer el mejor sabor al mejor precio.
                    </p>
                    <div class="offcanvas__contact">
                        <h4>Contact Info</h4>
                        <ul>
                            <li class="d-flex align-items-center">
                                <div class="offcanvas__contact-icon">
                                    <i class="fal fa-map-marker-alt"></i>
                                </div>
                                <div class="offcanvas__contact-text">
                                    <a target="_blank" href="#">Fray Daniel Mireles 2514, Leon, Guanajuato, Mexico</a>
                                </div>
                            </li>
                            <li class="d-flex align-items-center">
                                <div class="offcanvas__contact-icon mr-15">
                                    <i class="fal fa-envelope"></i>
                                </div>
                                <div class="offcanvas__contact-text">
                                    <a href="tel:+4775780426"><span>freddyspizzaoficial@gmail.com</span></a>
                                </div>
                            </li>
                            <li class="d-flex align-items-center">
                                <div class="offcanvas__contact-icon mr-15">
                                    <i class="fal fa-clock"></i>
                                </div>
                                <div class="offcanvas__contact-text">
                                    <a target="_blank" href="#">Martes a Viernes 2PM - 9PM <br> Sabado y Domingo 1PM a 11:50PM</a>
                                </div>
                            </li>
                            <li class="d-flex align-items-center">
                                <div class="offcanvas__contact-icon mr-15">
                                    <i class="far fa-phone"></i>
                                </div>
                                <div class="offcanvas__contact-text">
                                    <a href="tel:+11002345909">4775780426</a>
                                </div>
                            </li>
                        </ul>
                        <div class="header-button mt-4">
                            <a href="shop.html" class="theme-btn">
                                <span class="button-content-wrapper d-flex align-items-center justify-content-center">
                                    <span class="button-icon"><i class="fa-sharp fa-regular fa-cart-shopping bg-transparent text-white me-2"></i></span>
                                    <span class="button-text">ORDENE AHORA!</span>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas__overlay"></div>

    <!-- Header Section Start -->
    <header class="header-section-3 dark-mood" style="background-image: url('assets/img/bg/bannerBG3_1.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
        <div class="overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, #010F1C 0%, rgba(1, 15, 28, 0.75) 100%); z-index: 0;"></div>
        <div class="container-fluid" style="position: relative; z-index: 1;">
            <div class="main-header-wrapper">
                <div class="main-header-items">
                    <div id="header-sticky" class="header-3">
                        <div class="mega-menu-wrapper">
                            <div class="header-main">
                                <div class="header-left">
                                    <div class="header__hamburger d-xl-block my-auto">
                                        <div class="sidebar__toggle">
                                            <i class="fas fa-bars"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="header-middle">
                                    <div class="mean__menu-wrapper">
                                        <div class="main-menu">
                                            <nav id="mobile-menu">
                                                <ul>
                                                    <li class="main-nav-item d-xl-block d-none">
                                                        <a href="index.html">Inicio</a>
                                                    </li>
                                                    <li class="logo-item d-none d-xl-block">
                                                        <div class="logo-image">
                                                            <a href="index.html"><img src="assets/img/logo/logo-light.png" alt="Freddy's Logo"></a>
                                                        </div>
                                                    </li>
                                                    <li class="main-nav-item d-xl-block d-none">
                                                        <a href="my-account.html">Mi Cuenta</a>
                                                    </li>
                                                </ul>
                                            </nav>
                                        </div>
                                    </div>
                                </div>
                                <div class="header-right d-flex justify-content-end align-items-center">
                                    <!-- Google Sign-In -->
                                    <div id="google-signin-container" class="google-signin-container">
                                        <button class="custom-google-btn" onclick="window.location.href='https://freddys.com.mx/auth/google_auth.php'">
                                            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                                            <span>Acceder con Google</span>
                                        </button>
                                    </div>
                                    <!-- Carrito -->
                                    <div class="header__cart">
                                        <a href="#" id="cart-icon-link">
                                            <i class="fa-sharp fa-regular fa-cart-shopping"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Cart Panel -->
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h3>Tu Carrito</h3>
            <button class="cart-close-btn" id="cartCloseBtn">X</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Los ítems se añadirán dinámicamente con JavaScript -->
        </div>
        <div class="cart-total" id="cartTotal">Total: $0.00</div>
        <form class="cart-form mt-4">
            <div class="mb-3">
                <label for="customerName" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="customerName" required>
            </div>
            <div class="mb-3">
                <label for="customerAddress" class="form-label">Dirección</label>
                <input type="text" class="form-control" id="customerAddress" required>
                <button type="button" class="add-address-btn" id="addAddressBtn" style="display: none;">Añadir otra dirección</button>
                <input type="hidden" id="latitude">
                <input type="hidden" id="longitude">
            </div>
            <div class="mb-3">
                <label for="customerPhone" class="form-label">Teléfono</label>
                <input type="tel" class="form-control" id="customerPhone" required>
            </div>
            <div class="payment-options">
                <label for="paymentMethod" class="form-label">Método de Pago</label>
                <select class="payment-method-select" id="paymentMethod">
                    <option value="">Seleccionar método de pago</option>
                    <option value="paypal">PayPal</option>
                    <option value="mercadopago">Mercado Pago</option>
                </select>
            </div>
            <div id="paypal-button-container" class="mt-3" style="display: none;"></div>
            <div id="wallet_container" class="mt-3" style="display: none;"></div>
        </form>
    </div>

    <!-- Account Section Start -->
    <section class="account-section section-padding" style="background-color: #181818; color: #FFFFFF;">
        <div class="container" style="background-color: #181818; padding: 20px;;">
            <div class="row">
                <div class="col-12">
                    <!-- Not Logged In State -->
                    <div id="notLoggedIn" class="account-not-logged text-center" style="background-color: #2b2b2b; padding: 20px; border-radius: 10px; border: 2px solid #02142A;">
                        <div class="account-not-logged-content">
                            <i class="fas fa-user-lock mb-4" style="font-size: 4rem; color: #02142A;"></i>
                            <h2 class="mb-3" style="color: #FFFFFF;">Acceso Requerido</h2>
                            <p class="mb-4" style="color: #CCCCCC;">Para acceder a tu cuenta y ver tu historial de pedidos, direcciones y telefonos, por favor inicia sesion con Google.</p>
                            <button class="custom-google-btn" onclick="window.location.href='https://freddys.com.mx/auth/google_auth.php'" style="background-color: #02142A; color: #fff; padding: 10px 20px; border: 2px solid #02142A; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: bold; margin: 0 auto; width: fit-content;">
                                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" style="margin-right: 10px; width: 20px;">
                                <span>Iniciar Sesión con Google</span>
                            </button>
                        </div>
                    </div>

                    <!-- Logged In State -->
                    <div id="loggedIn" class="account-content" style="display: none;">
                        <div class="row">
                            <!-- Sidebar Navigation -->
                            <div class="col-lg-3">
                                <div class="account-sidebar">
                                    <div class="account-user-info mb-4">
                                        <div class="user-avatar">
                                            <img id="userAvatar" src="" alt="User Avatar">
                                        </div>
                                        <h3 id="userName" class="mt-3"></h3>
                                        <p id="userEmail"></p>
                                    </div>
                                    <ul class="account-menu">
                                        <li class="active" data-tab="orders">
                                            <a href="#"><i class="fas fa-shopping-bag"></i> Mis Pedidos</a>
                                        </li>
                                        <li data-tab="addresses">
                                            <a href="#"><i class="fas fa-map-marker-alt"></i> Mis Direcciones</a>
                                        </li>
                                        <li data-tab="phones">
                                            <a href="#"><i class="fas fa-phone"></i> Mis Teléfonos</a>
                                        </li>
                                        <li data-tab="settings">
                                            <a href="#"><i class="fas fa-cog"></i> Configuración</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Main Content -->
                            <div class="col-lg-9">
                                <!-- Orders Tab -->
                                <div class="account-tab-content active" id="orders-tab">
                                    <div class="account-tab-header">
                                        <h2>Mis Pedidos</h2>
                                        <div class="order-filters">
                                            <select class="form-select" id="orderFilter">
                                                <option value="all">Todos los pedidos</option>
                                                <option value="pending">Pendientes</option>
                                                <option value="completed">Completados</option>
                                                <option value="cancelled">Cancelados</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="orders-table">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>ID Pedido</th>
                                                    <th>Fecha</th>
                                                    <th>Total</th>
                                                    <th>Estado</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody id="ordersList">
                                                <!-- Orders will be populated here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Addresses Tab -->
                                <div class="account-tab-content" id="addresses-tab">
                                    <div class="account-tab-header">
                                        <h2>Mis Direcciones</h2>
                                        <button class="theme-btn" id="addAddressBtn">
                                            <i class="fas fa-plus"></i> Añadir Dirección
                                        </button>
                                    </div>
                                    <div class="addresses-grid" id="addressesList">
                                        <!-- Addresses will be populated here -->
                                    </div>
                                </div>

                                <!-- Phones Tab -->
                                <div class="account-tab-content" id="phones-tab">
                                    <div class="account-tab-header">
                                        <h2>Mis Teléfonos</h2>
                                        <button class="theme-btn" id="addPhoneBtn">
                                            <i class="fas fa-plus"></i> Añadir Teléfono
                                        </button>
                                    </div>
                                    <div class="phones-list" id="phonesList">
                                        <!-- Phones will be populated here -->
                                    </div>
                                </div>

                                <!-- Settings Tab -->
                                <div class="account-tab-content" id="settings-tab">
                                    <div class="account-tab-header">
                                        <h2>Configuración</h2>
                                    </div>
                                    <div class="settings-form">
                                        <div class="form-group">
                                            <label>Notificaciones</label>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="emailNotifications">
                                                <label class="form-check-label" for="emailNotifications">Notificaciones por correo</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="smsNotifications">
                                                <label class="form-check-label" for="smsNotifications">Notificaciones por SMS</label>
                                            </div>
                                        </div>
                                        <button class="theme-btn" id="saveSettings">Guardar Cambios</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer-section bg-title fix">
        <div class="footer-bottom">
            <div class="container">
                <div class="footer-wrapper d-flex align-items-center justify-content-between">
                    <p class="wow fadeInLeft" data-wow-delay=".3s">
                        © Gracias por Comprar en <a href="index.html">Freddy's Pizza</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- All JS Plugins -->
    <script src="assets/js/jquery-3.7.1.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.waypoints.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/viewport.jquery.js"></script>
    <script src="assets/js/magnific-popup.min.js"></script>
    <script src="assets/js/tilt.min.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/nice-select.min.js"></script>
    <script src="assets/js/main.js"></script>
    <!-- Custom Account JS -->
    <script src="assets/js/account.js"></script>
    <script>
        // Inicializar el carrito
        let cart = [];
        try {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        } catch (error) {
            console.error('Error al cargar el carrito:', error);
            cart = [];
        }

        // Inicializar eventos del carrito
        document.addEventListener('DOMContentLoaded', function() {
            const cartIcon = document.getElementById('cartIcon');
            const cartPanel = document.getElementById('cartPanel');
            const cartCloseBtn = document.getElementById('cartCloseBtn');

            if (cartIcon && cartPanel && cartCloseBtn) {
                cartIcon.addEventListener('click', function() {
                    cartPanel.style.display = 'block';
                    updateCartDisplay();
                });

                cartCloseBtn.addEventListener('click', function() {
                    cartPanel.style.display = 'none';
                });
            }
        });

        function handleCredentialResponse(response) {
            console.log("ID Token: " + response.credential);
            // Enviar el token al backend para verificación, e.g., window.location.href = '/auth/google?credential=' + response.credential;
            alert('Inicio de sesión exitoso! Redirigiendo...');
            // Aquí puedes redirigir o manejar la lógica del lado del cliente
        }
        window.onload = function() {
            google.accounts.id.initialize({
                client_id: "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",
                callback: handleCredentialResponse
            });
            google.accounts.id.renderButton(
                document.getElementById('google-signin-container'),
                { theme: 'outline', size: 'large', text: 'signin_with' }
            );
            // Renderizar para el botón en notLoggedIn si es necesario, o usa el mismo contenedor
        };
    </script>
</body>
</html>
